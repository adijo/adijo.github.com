<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Leetcode - Bulb Switcher &middot; Aditya Joshi
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- MathJax -->
   
      <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [ ['$','$'], ['\(', '\)'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true,
    }
  });
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
    
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35712896-2', 'auto');
  ga('send', 'pageview');

</script>
  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Aditya Joshi
        </a>
      </h1>
      <p class="lead">Information about my personal projects, research and professional experience.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/">Blog</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/contact/">Contact</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/courses/">Courses</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/professional/">Professional</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/research/">Research</a>
          
        
      
        
          
        
      
        
          
        
      


      <span class="sidebar-nav-item">Currently v2.1.0</span>
    </nav>

    <p>&copy; 2019. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Leetcode - Bulb Switcher</h1>
  <span class="post-date">29 Jan 2016</span>
  <p>I solved this <a href="https://leetcode.com/problems/bulb-switcher/">problem</a> by trying to find patterns in the output for various input values.</p>

<h3 id="analysis">Analysis</h3>
<p>At first, I tried the naive approach, that is for each index, I found out the number of indices that would toggle this particular bulb. Depending on this parity, we can find out the final answer. This was too slow to get accepted by the judge. I thought about it for some time but couldnâ€™t come up with anything. I decided to try to detect patterns in the output for each input value. And sure enough, a pattern emerged. With $ n $ referring to the number of bulbs, the number of bulbs on after $ n $ rounds of toggling carried out in the way described in the question were as follows.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="mi">1</span> <span class="p">:</span> <span class="mi">1</span>
<span class="mi">2</span> <span class="p">:</span> <span class="mi">1</span>
<span class="mi">3</span> <span class="p">:</span> <span class="mi">1</span>
<span class="mi">4</span> <span class="p">:</span> <span class="mi">2</span>
<span class="mi">5</span> <span class="p">:</span> <span class="mi">2</span>
<span class="mi">6</span> <span class="p">:</span> <span class="mi">2</span>
<span class="mi">7</span> <span class="p">:</span> <span class="mi">2</span>
<span class="mi">8</span> <span class="p">:</span> <span class="mi">2</span>
<span class="mi">9</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">10</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">11</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">12</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">13</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">14</span> <span class="p">:</span> <span class="mi">3</span></code></pre></figure>

<p>The number of <code class="highlighter-rouge">1's</code> here equaled <code class="highlighter-rouge">3,</code> the number of <code class="highlighter-rouge">2's</code> equaled 5 and so on. From here, after fiddling with the sequence, I decided to enumerate the sequence above.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="mi">1</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="p">:</span> <span class="mi">5</span>
<span class="mi">3</span> <span class="p">:</span> <span class="mi">7</span>
<span class="mi">4</span> <span class="p">:</span> <span class="mi">9</span>
<span class="mi">5</span> <span class="p">:</span> <span class="mi">11</span></code></pre></figure>

<p>What this means is that the first three values of $n$ would have $ 1 $ bulb on, the next $ 5 $ values of $ n $ would have $ 2 $ bulbs on and so on. We have a sequence as follows, $ 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3 \cdots $ Given a particular $ n, $ we need to be able to quickly find its <em>index.</em>  We can find out the cumulative sum of the above sequence as follows</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="mi">1</span> <span class="p">:</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="p">:</span> <span class="mi">8</span>
<span class="mi">3</span> <span class="p">:</span> <span class="mi">15</span>
<span class="mi">4</span> <span class="p">:</span> <span class="mi">24</span></code></pre></figure>

<p>Thus, given a value of $ n $, if we can quickly find out its index in the above table, we can find the number of bulbs on. The sequence above can be written with the following recurrence relation.</p>

<script type="math/tex; mode=display">f(0) = 3, f(n) = 2(n + 1) + 1 + f(n - 1)</script>

<p>If we <a href="http://www.wolframalpha.com/input/?i=f%280%29+%3D+3%2C+f%28n%29+%3D+%282*%28n+%2B+1%29+%2B+1%29+%2B+f%28n+-+1%29">solve</a> this recurrence relation, we get a closed form solution for $ n, $ which is $f(n) = n^2 + 4n + 3.$ Thus, for any given value of $ n, $ we can find the positive root of this quadratic equation and after adjusting it by $ 1 $ for the indices, return that value. For example, if we need to find the number of bulbs on for $n = 10$, we have</p>

<script type="math/tex; mode=display">n^2 + 4n + 3 = 10</script>

<p>After find out the roots using $ a = 1, b = 4, c = -7 $ in the quadratic formula, $ \dfrac{-b + \sqrt{b^2 - 4ac}}{2a}, $ we get $ n = 1.31662479036. $ We find the ceil, $ \text{ceil}(1.3166) = 2 $ and then do the off by $ 1 $ adjustment by adding $ 1, $ which gives us our final answer, $ 3. $</p>

<h3 id="code">Code</h3>
<script src="https://gist.github.com/adijo/04583f051a7bbdb651e4.js"></script>


</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2016/06/05/leetcode-integer-break/">
            Leetcode - Integer Break
            <small>05 Jun 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/06/05/leetcode-house-robber-iii/">
            Leetcode - House Robber III
            <small>05 Jun 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/06/05/leetcode-game-of-life/">
            Leetcode - Game of Life
            <small>05 Jun 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//adijogithubio.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

    </div>

  </body>
</html>
