<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Optimization - Fantasy Football League &middot; Aditya Joshi
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- MathJax -->
   
      <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
      inlineMath: [ ['$','$'], ['\(', '\)'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true,
    }
  });
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
    
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35712896-2', 'auto');
  ga('send', 'pageview');

</script>
  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Aditya Joshi
        </a>
      </h1>
      <p class="lead">Information about my personal projects, research and professional experience.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/">Blog</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/contact/">Contact</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/courses/">Courses</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/professional/">Professional</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/research/">Research</a>
          
        
      
        
          
        
      
        
          
        
      


      <span class="sidebar-nav-item">Currently v2.1.0</span>
    </nav>

    <p>&copy; 2019. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Optimization - Fantasy Football League</h1>
  <span class="post-date">03 Feb 2016</span>
  <p>Some of my friends play a lot of <a href="http://fantasy.premierleague.com/">FPL.</a> One of them asked me an interesting problem. Out of the existing players, he wanted to choose 4 players, a defender, two midfielders and one forward such that he would get maximum expected points within a budget.</p>

<h3 id="analysis">Analysis</h3>
<p>This sounded suspiciously a lot like the knapsack problem. Each player $ i $ had an expected profit $ p_i $ and a cost of $ c_i.$ Let the budget be $ B.$ To solve this problem, I realised that we could formulate an integer linear program. We denote an indicator variable $ x_i $ for each player which could take on values of ${0, 1}$. Thus, we needed to maximize the following quantity, where $ n $ denotes the number of players.</p>

<script type="math/tex; mode=display">x_1 \cdot p_1 + x_2 \cdot p_2 + x_3 \cdot p_3 + \cdots + x_n \cdot p_n = \sum_{i = 1}^n x_i \cdot p_i</script>

<p>To enforce the condition that we need only a certain amount of midfielders, forwards and defenders, we associate each indicator variable $ x_i $ with a particular class of player. We then add constraints as follows. In our dataset, let us assume that players $ x_i \in [1 \cdots p] $ are defenders, $ x_i \in [p + 1 \cdots k] $ are midfielders and $ x_i \in [ k + 1 \cdots n ] $ are forwards. We add constraints to this as follows.</p>

<script type="math/tex; mode=display">\sum_{i = 1}^p x_i = 1</script>

<p>because out of the $ p $ defenders, we only want $ 1. $</p>

<p>For the midfielders,</p>

<script type="math/tex; mode=display">\sum_{i = p + 1}^k x_i = 2</script>

<p>as we need $2$ midfielders.</p>

<p>Finally,</p>

<script type="math/tex; mode=display">\sum_{i = k + 1}^n x_i = 1</script>

<p>for $ 1 $ forward.</p>

<p>The final constraint is that the sum of the cost of the chosen players should not exceed the budget.</p>

<script type="math/tex; mode=display">x_1 \cdot c_1 +  x_2 \cdot c_2 + x_3 \cdot c_3 + \cdots + x_n \cdot c_n \leq B</script>

<p>To summarize, here is the full linear program.</p>

<script type="math/tex; mode=display">\text{Maximize} \sum_{i = 1}^n x_i \cdot p_i</script>

<p>with constraints</p>

<script type="math/tex; mode=display">\sum_{i = 1}^p x_i = 1</script>

<script type="math/tex; mode=display">\sum_{i = p + 1}^k x_i = 2</script>

<script type="math/tex; mode=display">\sum_{i = k + 1}^n x_i = 1</script>

<script type="math/tex; mode=display">\sum_{i = 1}^n x_i \cdot c_i \leq B</script>

<p>Thus, we have formulated our integer linear program. To solve this in python, I used the <a href="https://pythonhosted.org/PuLP/">PuLP</a> module. Our <code class="highlighter-rouge">Solver</code> module expects an array of players, where each player is defined as a <code class="highlighter-rouge">5-tuple</code> of <code class="highlighter-rouge">(name, utility, cost, position, team).</code> The <code class="highlighter-rouge">utility</code> part is interesting, and was obtained online from various sources as the expected future utility of the player. This can be an interesting machine learning project itself, predicting the expected utility of a player, something that I will look into in the future. The number of each type of players is parameterized and can be set as desired.</p>

<p><em>Some brackets in my code will be displayed incorrectly and this is a Jekyll formatting issue.</em></p>

<h3 id="code">Code</h3>

<script src="https://gist.github.com/adijo/00ac1c350822c34ff7b7.js"></script>


</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2016/06/05/leetcode-integer-break/">
            Leetcode - Integer Break
            <small>05 Jun 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/06/05/leetcode-house-robber-iii/">
            Leetcode - House Robber III
            <small>05 Jun 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/06/05/leetcode-game-of-life/">
            Leetcode - Game of Life
            <small>05 Jun 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//adijogithubio.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

    </div>

  </body>
</html>
